<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="/css/styl.css" />
  </head>

  <body>
<script src="/socket.io/socket.io.js"></script>

    <div class="app">
      <div class="layer closed"></div>
      <h1 class="app__header">
        <span data-username="<%= locals.username %>">Witaj <%= locals.username %> </span>
        <span>Twój kod to <%= locals.code %></span>
        <form method="POST" action="/logout">
          <input
            class="app__header__logout"
            type="submit"
            value="wyloguj się"
          />
        </form>
      </h1>
      <main class="app__content">
        <div class="app__menu">
          <input
            type="button"
            class="app__menu__add-contact"
            value="dodaj kontakt"
          />
          <div class="app__menu__contacts">

          <% for(let i=0;i<locals.contacts.length;i++){ %>
          <div class="contact" data-name-of-chat="<%= locals.contacts[i].nameOfChat  %>">
            <div class="contact__avatar"> <%= locals.contacts[i].username.slice(0,2) %> </div>
              <div>
                <p class="contact__info__name"><%= locals.contacts[i].username %></p>
                <p class="contact__info__text">
                  <% if(locals.contacts[i].lastMessage) { %>
                      <% if(locals.contacts[i].sender===locals.username){%>
                        ty:
                      <% }%>
                      <%= locals.contacts[i].lastMessage %>
                  <%} %>
                  </p>
                </div>
          </div>
          <% } %>

          </div>

        </div>
        <div class="chat">
          <h1 class="chat__header">
            <?xml version="1.0" encoding="utf-8"?><!-- Uploaded to: SVG Repo, www.svgrepo.com, Generator: SVG Repo Mixer Tools -->
            <svg class="chat__header__back-arrow"   viewBox="0 0 512 512" xmlns="http://www.w3.org/2000/svg"><title>ionicons-v5-a</title><polyline points="244 400 100 256 244 112" style="fill:none;stroke:#000000;stroke-linecap:round;stroke-linejoin:round;stroke-width:48px"/><line x1="120" y1="256" x2="412" y2="256" style="fill:none;stroke:#000000;stroke-linecap:round;stroke-linejoin:round;stroke-width:48px"/></svg>
            <div class="chat__header__avatar"></div>
            <div class="chat__header__username"></div>
          </h1>
          <div class="chat__content">
            <div class="chat__content__message">Lorem ipsum</div>
            <div
              class="chat__content__message chat__content__message--current"
            >
              test
            </div>
          </div>
          <form class="chat__footer">
            <input
              type="text"
              class="chat__footer__message"
              name="message"
              placeholder="wiadomość"
            />
            <input
              type="button"
              class="chat__footer__send"
              value="wyślij"
            />
          </form>
        </div>
      </main>
    </div>
  <div class="popup">
    <div class="popup__info">
      <p class="popup__info__title">Wpisz kod</p>
      <input type="text" name="code" class="popup__info__code" />
    </div>
    <div class="popup__buttons">
      <input
        type="button"
        value="anuluj"
        class="popup__btn popup__btn--cancel"
      />
      <input type="button" value="dodaj" class="popup__btn popup__btn--add" />
    </div>
    <div class="popup__error"></div>
  </div>
  <script src="/scripts/server-client.js"></script>
  <script src="/scripts/ui.js"></script>
  <script src="/scripts/eventListeners.js"></script>
  </body>
</html>
